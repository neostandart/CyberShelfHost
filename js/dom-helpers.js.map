{"version":3,"file":"js/dom-helpers.js","mappings":"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","sources":["webpack://blazorsw-opus/webpack/bootstrap","webpack://blazorsw-opus/webpack/runtime/define property getters","webpack://blazorsw-opus/webpack/runtime/hasOwnProperty shorthand","webpack://blazorsw-opus/webpack/runtime/make namespace object","webpack://blazorsw-opus/./Scripts/dom-helpers/dom-helpers.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * dom-helpers.ts — Вспомогательные функции Web API для Blazor WebAssembly\r\n *\r\n * Этот модуль предоставляет сервисные функции, которые невозможно\r\n * или неудобно реализовать напрямую из C#/Blazor:\r\n *   - Pointer Capture API (захват/освобождение указателя)\r\n *   - Element geometry (getBoundingClientRect)\r\n *   - LocalStorage доступ\r\n *   - Динамическая модификация CSS Custom Properties (theming)\r\n *\r\n * Импортируется в C# как ES-модуль через IJSRuntime.\r\n */\r\n\r\n// ── Pointer Capture ───────────────────────────────────────────────────\r\n\r\n/**\r\n * Захватывает указатель (мышь/тач) на элементе.\r\n * Все последующие pointer-события будут направляться на этот элемент,\r\n * даже если указатель покинул его границы.\r\n *\r\n * @param elementId — HTML id элемента.\r\n * @param pointerId — идентификатор указателя из PointerEvent.pointerId.\r\n *\r\n * Сценарий использования: реализация drag-and-drop без потери\r\n * событий при быстром движении мыши за пределы элемента.\r\n */\r\nexport function setPointerCapture(elementId: string, pointerId: number): void {\r\n    const element = document.getElementById(elementId);\r\n    if (element) {\r\n        element.setPointerCapture(pointerId);\r\n    } else {\r\n        console.warn(`[DomHelpers] Element not found: #${elementId}`);\r\n    }\r\n}\r\n\r\n/**\r\n * Освобождает ранее захваченный указатель.\r\n *\r\n * @param elementId — HTML id элемента.\r\n * @param pointerId — идентификатор указателя.\r\n */\r\nexport function releasePointerCapture(elementId: string, pointerId: number): void {\r\n    const element = document.getElementById(elementId);\r\n    if (element) {\r\n        element.releasePointerCapture(pointerId);\r\n    } else {\r\n        console.warn(`[DomHelpers] Element not found: #${elementId}`);\r\n    }\r\n}\r\n\r\n// ── Element Geometry ──────────────────────────────────────────────────\r\n\r\n/** Результат getBoundingClientRect, сериализуемый для C#. */\r\ninterface BoundingRect {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    top: number;\r\n    right: number;\r\n    bottom: number;\r\n    left: number;\r\n}\r\n\r\n/**\r\n * Возвращает размеры и позицию элемента относительно viewport.\r\n *\r\n * @param elementId — HTML id элемента.\r\n * @returns BoundingRect или null, если элемент не найден.\r\n */\r\nexport function getElementBoundingRect(elementId: string): BoundingRect | null {\r\n    const element = document.getElementById(elementId);\r\n    if (!element) {\r\n        console.warn(`[DomHelpers] Element not found: #${elementId}`);\r\n        return null;\r\n    }\r\n\r\n    const rect = element.getBoundingClientRect();\r\n    // Возвращаем plain object (DOMRect не сериализуется напрямую в JSON)\r\n    return {\r\n        x: rect.x,\r\n        y: rect.y,\r\n        width: rect.width,\r\n        height: rect.height,\r\n        top: rect.top,\r\n        right: rect.right,\r\n        bottom: rect.bottom,\r\n        left: rect.left,\r\n    };\r\n}\r\n\r\n// ── LocalStorage ──────────────────────────────────────────────────────\r\n\r\n/**\r\n * Сохраняет значение в LocalStorage.\r\n * Используется для персистентности пользовательских настроек.\r\n *\r\n * @param key — ключ.\r\n * @param value — значение (строка).\r\n */\r\nexport function setLocalStorageItem(key: string, value: string): void {\r\n    try {\r\n        localStorage.setItem(key, value);\r\n    } catch (e) {\r\n        // В приватном режиме или при переполнении квоты\r\n        console.error(`[DomHelpers] Failed to write localStorage: ${key}`, e);\r\n    }\r\n}\r\n\r\n/**\r\n * Читает значение из LocalStorage.\r\n *\r\n * @param key — ключ.\r\n * @returns значение или null, если ключ отсутствует.\r\n */\r\nexport function getLocalStorageItem(key: string): string | null {\r\n    try {\r\n        return localStorage.getItem(key);\r\n    } catch (e) {\r\n        console.error(`[DomHelpers] Failed to read localStorage: ${key}`, e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Удаляет значение из LocalStorage.\r\n *\r\n * @param key — ключ.\r\n */\r\nexport function removeLocalStorageItem(key: string): void {\r\n    try {\r\n        localStorage.removeItem(key);\r\n    } catch (e) {\r\n        console.error(`[DomHelpers] Failed to remove localStorage: ${key}`, e);\r\n    }\r\n}\r\n\r\n// ── CSS Custom Properties (Theming) ───────────────────────────────────\r\n\r\n/**\r\n * Устанавливает CSS Custom Property на элементе :root.\r\n * Это позволяет динамически менять тему приложения из C#.\r\n *\r\n * @param variableName — имя CSS-переменной (например, \"--primary-color\").\r\n * @param value — значение (например, \"#6366f1\").\r\n *\r\n * Принцип работы: все компоненты UI используют var(--primary-color)\r\n * в стилях. Изменение этой переменной мгновенно обновляет весь UI.\r\n */\r\nexport function setCssVariable(variableName: string, value: string): void {\r\n    document.documentElement.style.setProperty(variableName, value);\r\n}\r\n\r\n/**\r\n * Читает текущее значение CSS Custom Property.\r\n *\r\n * @param variableName — имя CSS-переменной.\r\n * @returns текущее значение или пустая строка.\r\n */\r\nexport function getCssVariable(variableName: string): string {\r\n    return getComputedStyle(document.documentElement)\r\n        .getPropertyValue(variableName)\r\n        .trim();\r\n}\r\n\r\n// ── Focus Management ──────────────────────────────────────────────────\r\n\r\n/**\r\n * Программно устанавливает фокус на элемент.\r\n * Полезно для accessibility и управления фокусом после навигации.\r\n *\r\n * @param elementId — HTML id элемента.\r\n */\r\nexport function focusElement(elementId: string): void {\r\n    const element = document.getElementById(elementId);\r\n    if (element) {\r\n        element.focus();\r\n    }\r\n}\r\n\r\n// ── Clipboard ─────────────────────────────────────────────────────────\r\n\r\n/**\r\n * Копирует текст в буфер обмена.\r\n * Использует современный Clipboard API с fallback.\r\n *\r\n * @param text — текст для копирования.\r\n * @returns true при успехе, false при ошибке.\r\n */\r\nexport async function copyToClipboard(text: string): Promise<boolean> {\r\n    try {\r\n        await navigator.clipboard.writeText(text);\r\n        return true;\r\n    } catch {\r\n        console.warn(\"[DomHelpers] Clipboard API failed.\");\r\n        return false;\r\n    }\r\n}\r\n"],"names":[],"sourceRoot":""}