var e;let r;function n(e,r){"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"VERIFICATION",verificationRequest:e,cryptoKeyRequest:r}):console.warn("Service Worker not active, cannot start verification.")}function t(e,r,n){"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"REGISTRATION",anchor:e,apiKeyRequest:r,cryptoKeyRequest:n}):console.warn("Service Worker not active, cannot start checking.")}function i(e,r,n){"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"UNREGISTRATION",apiKey:e,anchor:r,unregRequest:n}):console.warn("Service Worker not active, cannot start checking.")}async function a(e){r=e}!function(e){e[e.RegVerifying=0]="RegVerifying",e[e.RegRegistering=1]="RegRegistering",e[e.RegWaiting=2]="RegWaiting",e[e.RegUnregistering=3]="RegUnregistering",e[e.RegVerified=4]="RegVerified",e[e.RegRegistered=5]="RegRegistered",e[e.RegUnregistered=6]="RegUnregistered",e[e.RegDeclined=7]="RegDeclined",e[e.RegDiscarded=8]="RegDiscarded",e[e.HttpFailure=9]="HttpFailure",e[e.HttpError=10]="HttpError"}(e||(e={})),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",async n=>{if("type"in n.data)switch(n.data.type){case e.RegVerifying:r.invokeMethodAsync("InformVerifying");break;case e.RegRegistering:const t=n.data;r.invokeMethodAsync("InformRegistering",t.anchor);break;case e.RegWaiting:const i=n.data;r.invokeMethodAsync("InformWaiting",i.anchor);break;case e.RegUnregistering:r.invokeMethodAsync("InformUnregistering");break;case e.RegVerified:const a=n.data;r.invokeMethodAsync("InformVerified",a.credential);break;case e.RegRegistered:const o=n.data;r.invokeMethodAsync("InformRegistered",o.credential,o.unregAgentInfo);break;case e.RegUnregistered:const s=n.data;r.invokeMethodAsync("InformUnregistered",s.anchor);break;case e.RegDeclined:const c=n.data;r.invokeMethodAsync("InformDeclined",c.message);break;case e.RegDiscarded:const g=n.data;r.invokeMethodAsync("InformDiscarded",g.message);break;case e.HttpFailure:const d=n.data;r.invokeMethodAsync("HandleHttpFailure",d.status,d.credential);break;case e.HttpError:const R=n.data;r.invokeMethodAsync("HandleHttpError",R.credential,R.message)}});export{a as initializeAsync,t as register,i as unregister,n as verify};