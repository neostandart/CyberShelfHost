var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{initialize:()=>l});var n={};e.r(n),e.d(n,{cancelFullScreen:()=>b,doFullScreen:()=>_,getFullScreenElement:()=>h,initialize:()=>p,isFullScreen:()=>d,isFullScreenEnabled:()=>g,toggle:()=>v});var r={};e.r(r),e.d(r,{HtmlStateKeeper:()=>y,createKeeper:()=>w});var i={};e.r(i);var o={};e.r(o),e.d(o,{fetchJson:()=>L,fetchSvgFromFile:()=>M,fetchTextFile:()=>D,readAsDataURL:()=>C,readAsText:()=>S});var s={};function l(e){function t(){e.invokeMethodAsync("Network.StatusChanged",navigator.onLine)}window.addEventListener("online",t),window.addEventListener("offline",t),setTimeout(()=>{t()},0)}let a;e.r(s),e.d(s,{addClass:()=>Q,addClassBySelector:()=>ee,appendChild:()=>ve,bindPositionTo:()=>_e,calcRelativeWidth:()=>me,callVoidMethod:()=>ae,callVoidMethodBySelector:()=>ce,callVoidMethodFromClosest:()=>ue,callVoidMethodWithinScope:()=>he,centerElementRelativeTarget:()=>pe,clickElement:()=>ke,fetchBoundingClientRects:()=>fe,fillFrameDoc:()=>Me,getAttribute:()=>$,getBoundingClientRect:()=>de,getCssVariable:()=>ie,getGlobalObject:()=>be,getProperty:()=>X,getPropertyByPath:()=>G,getStyleProperty:()=>se,getVasya:()=>K,hasClass:()=>re,queryBoundingClientRect:()=>ge,regDragLocking:()=>A,regDragable:()=>R,removeAttribute:()=>W,removeChild:()=>ye,removeClass:()=>ne,setAttribute:()=>U,setCssVariable:()=>oe,setProperty:()=>Y,setPropertyByPath:()=>J,setStyleProperty:()=>le,setUniqueClass:()=>te,subEventNotify:()=>Ee,subOutsideCapture:()=>I,subTransitionEnd:()=>De,subVisibilityObserve:()=>j,unregDragLocking:()=>H,unregDragable:()=>F,unsubEventNotify:()=>Ce,unsubOutsideCapture:()=>Z,unsubTransitionEnd:()=>Le,unsubVisibilityObserve:()=>V});let c,u=null;function h(){return u}function d(){return!!u}function g(){const e=a;return e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled}function f(e){e.stopPropagation(),c&&c.invokeMethod("InformStateChanged",d())}function m(e){e.stopPropagation(),c&&c.invokeMethod("InformError")}function p(e,t){c=e,a=t||document,a.addEventListener("fullscreenchange",f,!1),a.addEventListener("fullscreenerror",m,!1),a.addEventListener("mozfullscreenchange",f,!1),a.addEventListener("mozfullscreenerror",m,!1),a.addEventListener("webkitfullscreenchange",f,!1),a.addEventListener("webkitfullscreenerror",m,!1)}function _(e){if(e||(e=a.documentElement),u===e)return;let t=u;u=e,t&&(t.removeEventListener("fullscreenchange",f),t.removeEventListener("fullscreenerror",m)),u&&(u.addEventListener("fullscreenchange",f),u.addEventListener("fullscreenerror",m));let n,r=u;r.requestFullscreen?n=r.requestFullscreen:r.mozRequestFullScreen?n=r.mozRequestFullScreen:r.webkitRequestFullscreen&&(n=r.webkitRequestFullscreen),n&&n.call(r)}function b(){const e=a;e.cancelFullScreen?e.cancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen(),u=null}function v(){d()?b():_()}class y{_mapTargets;_mapHeldElements;constructor(){this._mapTargets=new Map,this._mapHeldElements=new Map}hold(e,t){this._mapHeldElements.set(e,t)}unhold(e){this._mapHeldElements.delete(e)}save(e,t,n,r){let i=this._mapHeldElements.get(t);if(!i)throw new Error(`HtmlStateKeeper.save: The target element not found by HeldToken (${t})!`);if(n&&(i=i.querySelector(n)),!i)throw new Error(`HtmlStateKeeper.save: The target element not found by selector (${n})!`);let o=this._mapTargets.get(e);o||(o=new Map,this._mapTargets.set(e,o)),o.clear();for(let e=0;e<r.length;e++){const t=r[e];if(!(t in i))throw new Error(`HtmlStateKeeper.save: The saved element does not contain the specified property (strPropName=${t}).`);o.set(t,i[t])}}restore(e,t,n){let r=this._mapHeldElements.get(t);if(!r)throw new Error(`HtmlStateKeeper.restore: The target element not found by HeldToken (${t})!`);if(n&&(r=r.querySelector(n)),!r)throw new Error(`HtmlStateKeeper.restore: The target element not found by selector (${n})!`);let i=this._mapTargets.get(e);i&&i.forEach((e,t)=>{t in r?r[t]=e:console.error(`HtmlStateKeeper.restore: A property named '${t}' is missing in the target element!`)})}reset(){this._mapTargets.clear()}}function w(){return new y}new Map([["css","text/css"],["js","application/x-javascript"],["json","application/json"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["png","image/png"],["svg","image/svg+xml"],["bmp","image/bmp"],["mp3","audio/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["wma","audio/x-ms-wma"],["wav","audio/wav"]]);const E=new DOMParser;function C(e){return new Promise((t,n)=>{const r=new FileReader;r.onerror=()=>{r.abort(),n(new Error("Error reading file."))},r.addEventListener("load",()=>{t(r.result)},!1),r.readAsDataURL(e.files[0])})}function S(e){return new Promise((t,n)=>{const r=new FileReader;r.onerror=()=>{r.abort(),n(new Error("Error reading file."))},r.addEventListener("load",()=>{t(r.result)},!1),r.readAsText(e.files[0])})}function D(e){return new Promise((t,n)=>{fetch(e).then(e=>{!0===e.ok?t(e.text()):n(i.Helper.extractMessage(e))})})}function L(e){return new Promise((t,n)=>{fetch(e).then(e=>{!0===e.ok?t(e.json()):n(i.Helper.extractMessage(e))})})}async function M(e,t,n){const r=await D(e),i=E.parseFromString(r,"image/svg+xml").firstElementChild;return t&&i.setAttribute("id",t),n&&i.classList.add(...n.split(" ")),i}var k;!function(e){e[e.No=0]="No",e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch"}(k||(k={}));class T{_hteDragable;_hteCaptureZone;_hteArea;_refListener;_rule;_bMoving=null;_dragStatus=k.No;_ptLastDragPos=new DOMPoint;_callbackDragNotify;_draggingCssClass="dragging";constructor(e,t,n,r,i,o){this._hteDragable=e,this._hteCaptureZone=t,this._hteArea=n||e.offsetParent,this._refListener=r,this._rule=i,this._callbackDragNotify=o,this._hteCaptureZone.addEventListener("mousedown",this._onCaptureZoneMouseDown),this._hteCaptureZone.addEventListener("touchstart",this._onCaptureZoneTouchStart)}get element(){return this._hteDragable}get zone(){return this._hteCaptureZone}get area(){return this._hteArea}_ensureView(){if(!this._hteArea||!this._drag)return;const e=this._hteArea.getBoundingClientRect(),t=this._hteDragable.getBoundingClientRect(),n=new DOMRect;n.x=e.left-t.width/100*this._rule.left,n.y=e.top-t.height/100*this._rule.top,n.width=e.right+t.width/100*this._rule.right-n.left,n.height=e.bottom+t.height/100*this._rule.bottom-n.top;const r=this._hteDragable.offsetParent.getBoundingClientRect();let i=!1,o=!1;t.bottom>n.bottom&&(i=!0,t.y=n.bottom-t.height),t.top<n.top&&(i=!0,t.y=n.top),t.right>n.right&&(o=!0,t.x=n.right-t.width),t.left<n.left&&(o=!0,t.x=n.x),(i||o)&&(t.x=t.left-r.left,t.y=t.top-r.top,o&&(this._hteDragable.style.left=t.left+"px"),i&&(this._hteDragable.style.top=t.top+"px"))}_onCaptureZoneMouseDown=e=>{e.target&&e.target.closest("button")||this._dragStatus===k.No&&(e.preventDefault(),this._dragStatus=k.Mouse,document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),document.addEventListener("mouseup",this._onMouseUp,{capture:!0}),this._startDrag(e.clientX,e.clientY))};_onCaptureZoneTouchStart=e=>{this._dragStatus===k.No&&(this._dragStatus=k.Touch,document.addEventListener("touchmove",this._onTouchMove,{capture:!0}),document.addEventListener("touchend",this._onTouchEnd,{capture:!0}),this._startDrag(e.touches[0].clientX,e.touches[0].clientY))};_onMouseMove=e=>{this._dragStatus===k.Mouse&&(e.preventDefault(),this._drag(e.clientX,e.clientY))};_onMouseUp=e=>{this._dragStatus===k.Mouse&&(e.preventDefault(),this._endDrag())};_onTouchMove=e=>{this._dragStatus===k.Touch&&this._drag(e.touches[0].clientX,e.touches[0].clientY)};_onTouchEnd=e=>{this._dragStatus===k.Touch&&this._endDrag()};_startDrag(e,t){this._bMoving=!1,this._hteDragable.classList.add(this._draggingCssClass),this._ptLastDragPos.x=e,this._ptLastDragPos.y=t}_drag(e,t){if(!1===this._bMoving){this._bMoving=!0;const e=this._hteDragable.getBoundingClientRect(),t=this._hteDragable.offsetParent.getBoundingClientRect();this._hteDragable.style.transform="none",this._hteDragable.style.left=e.left-t.left+"px",this._hteDragable.style.top=e.top-t.top+"px",this._callbackDragNotify(!0)}let n=this._ptLastDragPos.x-e,r=this._ptLastDragPos.y-t;this._ptLastDragPos.x=e,this._ptLastDragPos.y=t,this._hteDragable.style.top=this._hteDragable.offsetTop-r+"px",this._hteDragable.style.left=this._hteDragable.offsetLeft-n+"px"}_endDrag(){if(this._dragStatus!==k.No){switch(this._dragStatus){case k.Mouse:document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp);break;case k.Touch:document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd)}this._hteDragable.classList.remove(this._draggingCssClass),this._ensureView(),this._dragStatus=k.No,!0===this._bMoving&&(this._callbackDragNotify(!1),this._refListener?.invokeMethodAsync("notifyDragEnd",this._hteDragable.style.left,this._hteDragable.style.top)),this._bMoving=null}}}const x=[],P=[];function N(e){e?P.forEach(e=>e.style.pointerEvents="none"):P.forEach(e=>e.style.pointerEvents="auto")}function R(e,t,n=null,r,i=null){const o=function(e){return x.find(t=>t.element===e)}(e);o||x.push(new T(e,t,n,r,i,N))}function F(e){const t=function(e){return x.findIndex(t=>t.element===e)}(e);t>=0&&x.splice(t,1)}function A(e){P.indexOf(e)<0&&P.push(e)}function H(e){const t=P.indexOf(e);t>=0&&(e.style.pointerEvents="auto",P.splice(t,1))}class q{_element;_key;_objDotNet;_strCallbackName;_observer=null;_configObserver={attributes:!0,childList:!1,subtree:!1};_origDisplay;_origVisibility;constructor(e,t,n,r){this._element=e,this._key=t,this._objDotNet=n,this._strCallbackName=r;const i=window.getComputedStyle(e);this._origDisplay=i.getPropertyValue("display"),this._origVisibility=i.getPropertyValue("visibility"),this._observer=new MutationObserver(this.callback),this._observer.observe(this._element,this._configObserver)}dispose(){this._observer&&this._observer.disconnect(),this._observer=null}callback=(e,t)=>{let n=null;for(const t of e)if("attributes"===t.type){const e=window.getComputedStyle(this._element),t=e.getPropertyValue("display"),r=e.getPropertyValue("visibility");t===this._origDisplay&&r===this._origVisibility||(n={isDisplay:"none"!=t,visibility:r},this._origDisplay=t,this._origVisibility=r);break}n&&this._objDotNet.invokeMethodAsync(this._strCallbackName,this._key,n)}}var B=new Map;function j(e,t,n,r){if(B.has(t))throw new Error('The HTMLElement with key "${key}" is already being observed!');var i=new q(e,t,n,r);B.set(t,i)}function V(e){B.has(e)&&(B.get(e).dispose(),B.delete(e))}class O{_element;_key;_objDotNet;_strCallbackName;_strClosestTest;constructor(e,t,n,r,i){this._element=e,this._key=t,this._objDotNet=n,this._strCallbackName=r,this._strClosestTest=i,window.addEventListener("click",this.onClick,!0)}dispose(){window.removeEventListener("click",this.onClick,!0)}onClick=e=>{this._strClosestTest&&e.target instanceof HTMLElement&&e.target.closest(this._strClosestTest)||e.target instanceof Node&&this._element.contains(e.target)||this._objDotNet.invokeMethodAsync(this._strCallbackName,this._key)}}var z=new Map;function I(e,t,n,r,i=void 0){if(z.has(t))throw new Error('The HTMLElement with key "${key}" has already captured the mouse!');var o=new O(e,t,n,r,i);z.set(t,o)}function Z(e){z.has(e)&&(z.get(e).dispose(),z.delete(e))}function K(){return"ВАСЯ!!! из utils!!!"}function $(e,t){return e.hasAttribute(t)?e.getAttribute(t):null}function U(e,t,n){e.setAttribute(t,n)}function W(e,t){e.removeAttribute(t)}function X(e,t){return e[t]}function Y(e,t,n){e[t]=n}function G(e,t){const n=t.split(".");if(n.length>1){for(let t=0;t<n.length-1;t++)e=e[n[t]];t=n[n.length-1]}return e[t]}function J(e,t,n){const r=t.split(".");if(r.length>1){for(let t=0;t<r.length-1;t++)e=e[r[t]];t=r[r.length-1]}e[t]=n}function Q(e,t){e.classList.add(t)}function ee(e,t,n){const r=e.querySelector(t);r instanceof HTMLElement&&r.classList.add(n)}function te(e,t,n){const r=e.querySelectorAll("."+n);for(let e=0;e<r.length;e++)r[e].classList.remove(n);const i=e.querySelector(t);i instanceof HTMLElement&&i.classList.add(n)}function ne(e,t){e.classList.remove(t)}function re(e,t){return e.classList.contains(t)}function ie(e,t){return e.style.getPropertyValue(t)}function oe(e,t,n){e.style.setProperty(t,n)}function se(e,t){return e.style[t]}function le(e,t,n){e.style[t]=n}function ae(e,t){e[t]()}function ce(e,t,n){const r=e.querySelector(t);r&&r[n]()}function ue(e,t,n){const r=e.closest(t);r&&r[n]()}function he(e,t,n,r){const i=e.closest(t);if(i){const e=i.querySelector(n);e&&e[r]()}}function de(e){return e.getBoundingClientRect()}function ge(e,t=null){var n=t?t.querySelector(e):document.querySelector(e);return n?n.getBoundingClientRect():new DOMRect}function fe(e,t=null){var n=[];return e.forEach(e=>{e instanceof HTMLElement||(e=t?t.querySelector(e):document.querySelector(e)),n.push(e.getBoundingClientRect())}),n}async function me(e,t,n){let r=0;if(e&&t){const t=e?.clientWidth||0;if(t>0)if(Number.isInteger(n.min)&&t<=n.min)r=t;else{const e=Number(n.wish);r=Number.isInteger(e)?Math.round(t/100*e):t,Number.isInteger(n.max)&&r>n.max&&(r=n.max)}}return r}function pe(e,t,n=!0){const r=e.getBoundingClientRect(),i=e.offsetParent?.getBoundingClientRect(),o=t.getBoundingClientRect();let s=o.left+(o.width-r.width)/2;s-=i.left,e.style.left=s+"px"}function _e(e,t,n="bottom",r="start",i=0,o=!1){const s=t.getBoundingClientRect(),l=e.getBoundingClientRect(),a=e.offsetParent?.getBoundingClientRect();if(a){let t=0,c=0,u=!1;if("bottom"===n&&(u=!0,c=s.bottom-a.y+i),"start"===r&&u&&(t=s.left-a.x,o)){const e=t+l.width-window.innerWidth;e>0&&(t-=e)}e.style.top=c+"px",e.style.left=t+"px"}}function be(e){return window[e]}function ve(e,t){e.appendChild(t)}function ye(e,t){e.removeChild(t)}const we=[];function Ee(e,t,n,r,i){let o=t?e?.querySelector(t):e;if(o&&r){const e={target:o,eventName:n,listener:r,handler:e=>{r.invokeMethodAsync(i)}};e.target.addEventListener(n,e.handler),we.push(e)}}function Ce(e,t,n,r){let i=t?e?.querySelector(t):e;if(i&&r){const e=we.findIndex(e=>e.target===i&&e.eventName===n&&e.listener._id===r._id);if(e>=0){const t=we[e];t.target.removeEventListener(t.eventName,t.handler),we.splice(e,1)}}}const Se=[];function De(e,t,n,r,i){let o=t?e?.querySelector(t):e;if(o&&r){const e={emitter:o,propertyName:n,listener:r,handler:function(e){e.propertyName==this.propertyName&&r.invokeMethodAsync(i)}};e.emitter.addEventListener("transitionend",e.handler.bind(e)),Se.push(e)}}function Le(e,t,n){let r=t?e?.querySelector(t):e;if(r&&n){const e=Se.findIndex(e=>e.emitter===r&&e.listener._id===n._id);if(e>=0){const t=Se[e];t.emitter.removeEventListener("transitionend",t.handler),Se.splice(e,1)}}}function Me(e,t){return new Promise(n=>{e instanceof HTMLIFrameElement&&(e.srcdoc=t),setTimeout(()=>{n()},0)})}function ke(e,t){if(e instanceof HTMLElement){let n=e;t&&(n=n.querySelector(t)||n),n.click()}}function Te(){return t}function xe(){return n}function Pe(){return r}function Ne(){return o}function Re(){return s}export{xe as getFullscreenModule,Pe as getKeeperModule,Te as getNetworkModule,Ne as getPipeModule,Re as getUtilsModule};